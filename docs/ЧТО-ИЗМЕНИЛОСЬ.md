# –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨ –í –ö–û–î–ï

## üìù frontend/src/services/api.ts

### –ë–´–õ–û (—Å—Ç–∞—Ä—ã–π –∫–æ–¥):
```typescript
const API_URL = 'http://localhost:8083/api';  // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–†–¢!

// –¢–æ–ª—å–∫–æ authService, –±–µ–∑ postsService
```

### –°–¢–ê–õ–û (–Ω–æ–≤—ã–π –∫–æ–¥):
```typescript
const API_URL = 'http://localhost:8082/api';  // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–†–¢!

// –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã
export interface Post { ... }
export interface CreatePostRequest { ... }
export interface PageResponse<T> { ... }

// –î–æ–±–∞–≤–ª–µ–Ω postsService
export const postsService = {
  async getFeed(page = 0, size = 20): Promise<PageResponse<Post>>
  async createPost(data: CreatePostRequest): Promise<Post>
  async getPost(uuid: string): Promise<Post>
  async getUserPosts(userUuid: string, ...): Promise<PageResponse<Post>>
  async likePost(uuid: string): Promise<{ liked: boolean; likesCount: number }>
  async deletePost(uuid: string): Promise<void>
}

// authService –ù–ï –ò–ó–ú–ï–ù–ò–õ–°–Ø!
export const authService = {
  async login(...) // –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô
  async register(...) // –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô
  async getMe(): Promise<User> { // –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô
    const response = await api.get<User>('/auth/me');
    return response.data;
  }
  // –∏ —Ç.–¥.
}
```

---

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û

1. **–ü–æ—Ä—Ç API –∏–∑–º–µ–Ω—ë–Ω:**
   - –ë—ã–ª–æ: `http://localhost:8083/api` ‚ùå
   - –°—Ç–∞–ª–æ: `http://localhost:8082/api` ‚úÖ

2. **–î–æ–±–∞–≤–ª–µ–Ω postsService:**
   - 6 –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Å—Ç–∞–º–∏
   - –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é

3. **authService –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô:**
   - login() - –Ω–µ –º–µ–Ω—è–ª—Å—è
   - register() - –Ω–µ –º–µ–Ω—è–ª—Å—è
   - getMe() - –Ω–µ –º–µ–Ω—è–ª—Å—è
   - logout() - –Ω–µ –º–µ–Ω—è–ª—Å—è

---

## üîç –ü–û–ß–ï–ú–£ –ú–û–ñ–ï–¢ –ù–ï –†–ê–ë–û–¢–ê–¢–¨ –í–•–û–î

### –¢–µ–æ—Ä–∏—è 1: –°—Ç–∞—Ä—ã–π –ø–æ—Ä—Ç –≤ –∫–µ—à–µ –±—Ä–∞—É–∑–µ—Ä–∞
**–ï—Å–ª–∏ —Ç—ã —É–∂–µ –ø—ã—Ç–∞–ª—Å—è –≤–æ–π—Ç–∏ –î–û –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—Ç–∞:**
- Frontend –ø—ã—Ç–∞–ª—Å—è –æ–±—Ä–∞—â–∞—Ç—å—Å—è –Ω–∞ 8083
- –ó–∞–ø—Ä–æ—Å—ã –ø–∞–¥–∞–ª–∏ —Å –æ—à–∏–±–∫–æ–π
- –¢–æ–∫–µ–Ω—ã –º–æ–≥–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –±–∏—Ç—ã–º–∏ –≤ localStorage

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// F12 ‚Üí Console
localStorage.clear()
location.reload()
```

### –¢–µ–æ—Ä–∏—è 2: Backend –±—ã–ª –Ω–∞ 8083, —Ç–µ–ø–µ—Ä—å –Ω–∞ 8082
**–ü—Ä–æ–≤–µ—Ä—å –≤ application.properties:**
```properties
server.port=8082  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 8082!
```

### –¢–µ–æ—Ä–∏—è 3: Frontend –Ω–µ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–ª—Å—è
**–ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å:**
```powershell
# –û—Å—Ç–∞–Ω–æ–≤–∏ frontend (Ctrl+C)
cd frontend
npm run dev
# –ò–ª–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ:
rm -rf node_modules/.vite
npm run dev
```

---

## üß™ –¢–û–ß–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –ö–∞–∫–æ–π –ø–æ—Ä—Ç —É backend?
```powershell
# –í –ª–æ–≥–∞—Ö backend –∏—â–∏:
Tomcat started on port 8082 (http)
# –ï—Å–ª–∏ —Ç–∞–º 8083 ‚Üí –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å application.properties
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ö–∞–∫–æ–π –ø–æ—Ä—Ç —É frontend API?
```javascript
// F12 ‚Üí Console ‚Üí –≤—ã–ø–æ–ª–Ω–∏:
fetch('http://localhost:8082/api/auth/me', {
  headers: {
    'Authorization': 'Bearer ' + localStorage.getItem('accessToken')
  }
}).then(r => r.json()).then(console.log)

// –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ "Failed to fetch" ‚Üí backend –Ω–µ –Ω–∞ 8082
// –ï—Å–ª–∏ 401 Unauthorized ‚Üí —Ç–æ–∫–µ–Ω –±–∏—Ç—ã–π, –Ω—É–∂–µ–Ω login
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ï—Å—Ç—å –ª–∏ —Ç–æ–∫–µ–Ω –≤ localStorage?
```javascript
// F12 ‚Üí Console:
console.log('Token:', localStorage.getItem('accessToken'))

// –ï—Å–ª–∏ null ‚Üí –Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π login
// –ï—Å–ª–∏ –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–π —Ç–æ–∫–µ–Ω ‚Üí –æ–Ω –º–æ–≥ –±—ã—Ç—å –¥–ª—è 8083 –ø–æ—Ä—Ç–∞
```

---

## üéØ –ì–ê–†–ê–ù–¢–ò–†–û–í–ê–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï

```powershell
# 1. –ü–û–õ–ù–ê–Ø –û–ß–ò–°–¢–ö–ê
# –û—Å—Ç–∞–Ω–æ–≤–∏ frontend (Ctrl+C)
# –û—Å—Ç–∞–Ω–æ–≤–∏ backend (Ctrl+C)

# 2. –ü—Ä–æ–≤–µ—Ä—å application.properties
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: server.port=8082

# 3. –ó–∞–ø—É—Å—Ç–∏ backend
./gradlew clean bootRun

# –î–æ–∂–¥–∏—Å—å: "Tomcat started on port 8082"

# 4. –í –±—Ä–∞—É–∑–µ—Ä–µ (F12 ‚Üí Console):
localStorage.clear()

# 5. –ó–∞–∫—Ä–æ–π –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏ —Å localhost:5173

# 6. –ó–∞–ø—É—Å—Ç–∏ frontend –∑–∞–Ω–æ–≤–æ
cd frontend
npm run dev

# 7. –û—Ç–∫—Ä–æ–π –ù–û–í–£–Æ –≤–∫–ª–∞–¥–∫—É
http://localhost:5173

# 8. –í–æ–π–¥–∏: admin / admin123
```

---

## üìã –ß–¢–û –ü–†–û–í–ï–†–ò–¢–¨ –í –ë–†–ê–£–ó–ï–†–ï

### DevTools (F12):

**Console tab:**
- –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫—Ä–∞—Å–Ω—ã—Ö –æ—à–∏–±–æ–∫
- –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "Failed to fetch"
- –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "CORS error"

**Network tab:**
- –ü—Ä–∏ –ª–æ–≥–∏–Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å: `POST http://localhost:8082/api/auth/login`
- –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: `200 OK`
- Response –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `accessToken`

**Application tab ‚Üí Local Storage:**
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞:
  - `accessToken`: –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (JWT)
  - `refreshToken`: UUID

---

**–í–´–í–û–î: –ò–∑–º–µ–Ω–∏–ª—Å—è –¢–û–õ–¨–ö–û –ü–û–†–¢ —Å 8083 –Ω–∞ 8082. –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –Ω—É–∂–Ω–æ:**
1. –û—á–∏—Å—Ç–∏—Ç—å localStorage
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ backend –Ω–∞ 8082
3. –ü–µ—Ä–µ–∑–∞–π—Ç–∏ –∑–∞–Ω–æ–≤–æ

**–°–∫–∞–∂–∏ —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∫–æ–≥–¥–∞ –ø—ã—Ç–∞–µ—à—å—Å—è –≤–æ–π—Ç–∏!**

