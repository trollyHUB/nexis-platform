# 006 - –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï API

**–î–∞—Ç–∞:** 26.12.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

---

## üöÄ –ó–ê–ü–£–°–ö

1. –í IDEA –Ω–∞–∂–º–∏ **–∑–µ–ª—ë–Ω—É—é —Å—Ç—Ä–µ–ª–∫—É ‚ñ∂Ô∏è** –¥–ª—è –∑–∞–ø—É—Å–∫–∞
2. –î–æ–∂–¥–∏—Å—å –≤ –∫–æ–Ω—Å–æ–ª–∏: `Started IdentitySocialApplicationKt`
3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –Ω–∞ **http://localhost:8082**

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï (PowerShell)

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç

```powershell
# –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
Invoke-RestMethod -Uri "http://localhost:8082/" -Method Get

# Health check
Invoke-RestMethod -Uri "http://localhost:8082/api/public/health" -Method Get
```

### 2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```powershell
$body = @{
    username = "testuser"
    email = "test@example.com"
    password = "Password123"
    firstName = "Test"
    lastName = "User"
} | ConvertTo-Json

$response = Invoke-RestMethod -Uri "http://localhost:8082/api/auth/register" -Method Post -Body $body -ContentType "application/json"
$response | ConvertTo-Json -Depth 5

# –°–æ—Ö—Ä–∞–Ω–∏ —Ç–æ–∫–µ–Ω
$accessToken = $response.accessToken
$refreshToken = $response.refreshToken
```

### 3. –õ–æ–≥–∏–Ω

```powershell
$loginBody = @{
    usernameOrEmail = "testuser"
    password = "Password123"
} | ConvertTo-Json

$loginResponse = Invoke-RestMethod -Uri "http://localhost:8082/api/auth/login" -Method Post -Body $loginBody -ContentType "application/json"
$loginResponse | ConvertTo-Json -Depth 5

$accessToken = $loginResponse.accessToken
```

### 4. –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å JWT)

```powershell
$headers = @{
    Authorization = "Bearer $accessToken"
}

Invoke-RestMethod -Uri "http://localhost:8082/api/auth/me" -Method Get -Headers $headers | ConvertTo-Json -Depth 5
```

### 5. –õ–æ–≥–∏–Ω –∫–∞–∫ –∞–¥–º–∏–Ω

```powershell
$adminLogin = @{
    usernameOrEmail = "admin"
    password = "Admin123!"
} | ConvertTo-Json

$adminResponse = Invoke-RestMethod -Uri "http://localhost:8082/api/auth/login" -Method Post -Body $adminLogin -ContentType "application/json"
$adminResponse | ConvertTo-Json -Depth 5
```

---

## üîß –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï (curl)

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
```bash
curl http://localhost:8082/
```

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
```bash
curl -X POST http://localhost:8082/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","email":"test@example.com","password":"Password123"}'
```

### –õ–æ–≥–∏–Ω
```bash
curl -X POST http://localhost:8082/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"usernameOrEmail":"testuser","password":"Password123"}'
```

### –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å —Ç–æ–∫–µ–Ω–æ–º)
```bash
curl http://localhost:8082/api/auth/me \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN_HERE"
```

---

## üì± –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –í POSTMAN

### Import Collection

1. –û—Ç–∫—Ä–æ–π Postman
2. File ‚Üí Import
3. –°–æ–∑–¥–∞–π –Ω–æ–≤—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é "Identity Social API"

### –ó–∞–ø—Ä–æ—Å—ã:

**Register:**
- Method: POST
- URL: `http://localhost:8082/api/auth/register`
- Headers: `Content-Type: application/json`
- Body (raw JSON):
```json
{
    "username": "testuser",
    "email": "test@example.com",
    "password": "Password123",
    "firstName": "Test",
    "lastName": "User"
}
```

**Login:**
- Method: POST
- URL: `http://localhost:8082/api/auth/login`
- Body:
```json
{
    "usernameOrEmail": "testuser",
    "password": "Password123"
}
```

**Get Current User:**
- Method: GET
- URL: `http://localhost:8082/api/auth/me`
- Headers: `Authorization: Bearer <accessToken>`

---

## ‚úÖ –û–ñ–ò–î–ê–ï–ú–´–ï –û–¢–í–ï–¢–´

### –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (201 Created)
```json
{
    "accessToken": "eyJhbGciOiJIUzI1NiIs...",
    "refreshToken": "550e8400-e29b-41d4-a716...",
    "tokenType": "Bearer",
    "expiresIn": 86400,
    "user": {
        "uuid": "...",
        "username": "testuser",
        "email": "test@example.com",
        "roles": ["ROLE_USER"]
    }
}
```

### –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (400 Bad Request)
```json
{
    "timestamp": "...",
    "status": 400,
    "error": "Validation Failed",
    "message": "One or more fields have validation errors",
    "errorCode": "VALIDATION_ERROR",
    "details": {
        "password": "Password must contain at least one uppercase letter..."
    }
}
```

### –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (401 Unauthorized)
```json
{
    "timestamp": "...",
    "status": 401,
    "error": "Unauthorized",
    "message": "Invalid username or password",
    "errorCode": "INVALID_CREDENTIALS"
}
```

---

## üîê –¢–ï–°–¢–û–í–´–ï –ê–ö–ö–ê–£–ù–¢–´

| Username | Email | Password | –†–æ–ª–∏ |
|----------|-------|----------|------|
| admin | admin@example.com | Admin123! | ROLE_ADMIN, ROLE_USER |

---

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ –õ–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
4. ‚úÖ –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ endpoints —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

–î–∞–ª–µ–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
- Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Social —Ñ—É–Ω–∫—Ü–∏–∏ (–ø–æ—Å—Ç—ã, –ø–æ–¥–ø–∏—Å–∫–∏)

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 26.12.2025*

