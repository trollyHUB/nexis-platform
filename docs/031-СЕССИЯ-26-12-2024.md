# üìã –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏ 26.12.2024

> **–î–∞—Ç–∞:** 26 –¥–µ–∫–∞–±—Ä—è 2024  
> **–í—Ä–µ–º—è:** ~12:00 - 21:40 (UTC+5)  
> **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ~9.5 —á–∞—Å–æ–≤

---

## üéØ –¶–µ–ª–∏ —Å–µ—Å—Å–∏–∏

1. –ò–∑—É—á–∏—Ç—å —Ñ–∞–π–ª –ù–ê–ß–ê–õ–û.md –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
2. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL (–ø—Ä–æ–±–ª–µ–º—ã —Å–æ –≤—Ö–æ–¥–æ–º)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Docker –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–æ–∫–∞–ª—å–Ω–æ–π PostgreSQL 16
4. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞
5. –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL 16

**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç–∞—Ä–∞—è PostgreSQL –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞, –ø–∞—Ä–æ–ª—å –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–ª—Å—è.

**–†–µ—à–µ–Ω–∏–µ:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PostgreSQL 16 –Ω–∞ –ø–æ—Ä—Ç **5434**
- –ü–∞—Ä–æ–ª—å: `1234`
- –°–æ–∑–¥–∞–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `nexis_db`

```
Host: localhost
Port: 5434
Database: nexis_db
Username: postgres
Password: 1234
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker

**–ü—Ä–æ–±–ª–µ–º–∞:** Docker –Ω–µ –º–æ–≥ —Å–æ–±—Ä–∞—Ç—å backend - –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π Gradle.

```
–ü–ª–∞–≥–∏–Ω Spring Boot —Ç—Ä–µ–±—É–µ—Ç Gradle 8.x (8.14 –∏–ª–∏ –±–æ–ª–µ–µ –ø–æ–∑–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏)
–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è ‚Äî Gradle 8.5
```

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª—ë–Ω Dockerfile:
```dockerfile
# –ë—ã–ª–æ:
FROM gradle:8.5-jdk21-alpine AS builder

# –°—Ç–∞–ª–æ:
FROM gradle:8.14-jdk21-alpine AS builder
```

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Spring Security 7

**–ü—Ä–æ–±–ª–µ–º–∞:** –í Spring Security 7 –∏–∑–º–µ–Ω–∏–ª—Å—è API `DaoAuthenticationProvider`.

**–û—à–∏–±–∫–∏:**
- `Argument type mismatch: actual type is 'PasswordEncoder', but 'UserDetailsService' was expected`
- `Unresolved reference 'setUserDetailsService'`

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω SecurityConfig.kt:
```kotlin
// –ë—ã–ª–æ (–Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ –≤ Spring Security 7):
val authProvider = DaoAuthenticationProvider()
authProvider.setUserDetailsService(userDetailsService)

// –°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è Spring Security 7):
val provider = DaoAuthenticationProvider(userDetailsService)
provider.setPasswordEncoder(passwordEncoder())
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**application.properties:**
```properties
# –õ–æ–∫–∞–ª—å–Ω–∞—è PostgreSQL 16 (–ø–æ—Ä—Ç 5434)
spring.datasource.url=jdbc:postgresql://localhost:5434/nexis_db
spring.datasource.username=postgres
spring.datasource.password=1234
spring.jpa.hibernate.ddl-auto=update
```

### 5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ /api/health –≤ –ø—É–±–ª–∏—á–Ω—ã–µ endpoints

```kotlin
.requestMatchers("/actuator/health", "/api/health").permitAll()
```

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### Docker
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–±—Ä–∞–∑ | –†–∞–∑–º–µ—Ä | –°—Ç–∞—Ç—É—Å |
|-----------|-------|--------|--------|
| Backend | identity-social-backend:latest | 416MB | ‚úÖ –ì–æ—Ç–æ–≤ |
| Frontend | identity-social-frontend:latest | 81.7MB | ‚úÖ –ì–æ—Ç–æ–≤ |

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL 16)
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| Host | localhost |
| Port | 5434 |
| Database | nexis_db |
| –¢–∞–±–ª–∏—Ü | 9 |
| Admin user | ‚úÖ –°–æ–∑–¥–∞–Ω |

### –¢–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ:
1. `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
2. `roles` - –†–æ–ª–∏
3. `user_roles` - –°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–æ–ª–µ–π
4. `posts` - –ü–æ—Å—Ç—ã
5. `likes` - –õ–∞–π–∫–∏
6. `follows` - –ü–æ–¥–ø–∏—Å–∫–∏
7. `notifications` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
8. `user_sessions` - –°–µ—Å—Å–∏–∏
9. `refresh_tokens` - Refresh —Ç–æ–∫–µ–Ω—ã

### –ü–æ—Ä—Ç—ã
| –ü–æ—Ä—Ç | –°–µ—Ä–≤–∏—Å | –°—Ç–∞—Ç—É—Å |
|------|--------|--------|
| 5434 | PostgreSQL 16 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| 8082 | Backend (–ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ) | üîÑ –°–≤–æ–±–æ–¥–µ–Ω |
| 3000 | Frontend (–ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ) | üîÑ –°–≤–æ–±–æ–¥–µ–Ω |

---

## üîë –¢–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| Username | `admin` |
| Password | `Admin123!` |
| Email | admin@example.com |
| –†–æ–ª–∏ | ROLE_USER, ROLE_ADMIN |

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
cd C:\Users\Lenovo\IdeaProjects\identity-social
docker-compose up -d
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- Frontend: http://localhost:3000
- Backend API: http://localhost:8082

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ IntelliJ IDEA
1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ IntelliJ
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å `IdentitySocialApplication`
3. Frontend –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ: `cd frontend && npm run dev`

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ Gradle
```bash
.\gradlew.bat bootRun
```

---

## üßπ –û—á–∏—Å—Ç–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

- ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ Docker –∫—ç—à –æ—á–∏—â–µ–Ω (–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ 3.3 GB)
- ‚úÖ –ü–æ—Ä—Ç—ã 8082 –∏ 3000 –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã
- ‚úÖ PostgreSQL 16 —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç–æ–ª—å–∫–æ nexis_db)
- ‚úÖ –°—Ç–∞—Ä—ã–µ Docker volumes –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
identity-social/
‚îú‚îÄ‚îÄ src/main/kotlin/          # Backend (Kotlin + Spring Boot 4)
‚îú‚îÄ‚îÄ frontend/                 # Frontend (React + TypeScript + Vite)
‚îú‚îÄ‚îÄ docs/                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (31 —Ñ–∞–π–ª)
‚îú‚îÄ‚îÄ docker-compose.yml        # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile               # Backend Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ frontend/Dockerfile      # Frontend Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ build.gradle.kts         # Gradle –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ –ó–ê–ü–£–°–ö.md               # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É
```

---

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Kotlin** 2.2.21
- **Spring Boot** 4.0.1
- **Spring Security** 7.0.2
- **Hibernate** 7.2.0
- **PostgreSQL** 16
- **JWT** (jjwt 0.12.6)

### Frontend
- **React** 18
- **TypeScript**
- **Vite**
- **TailwindCSS**

### DevOps
- **Docker**
- **Gradle** 8.14+
- **GitHub**

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **Spring Security 7** - –Ω–æ–≤—ã–π API, `DaoAuthenticationProvider` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `UserDetailsService` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ
2. **Spring Boot 4** - —Ç—Ä–µ–±—É–µ—Ç Gradle 8.14+
3. **LoginRequest** - –ø–æ–ª–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `usernameOrEmail`, –Ω–µ `username`

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å OAuth2 (Google, GitHub)
3. –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å"
4. –†–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª NEXIS ID
5. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫ production

---

## üìå GitHub

**Repository:** https://github.com/trollyHUB/nexis-platform

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 26.12.2024 21:40 UTC+5*

